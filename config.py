# config.py
"""
IMD Sales Bot - Configuration & Constants
다크 엘레강스 (McKinsey 스타일) - 전문 컨설팅 톤
"""

# ============================================
# 1. UI 설정
# ============================================
APP_TITLE = "IMD AI 전략 컨설팅"
APP_ICON = "⬛"
LAYOUT = "centered"

# 색상 테마 (다크 엘레강스)
COLOR_PRIMARY = "#D4AF37"      # 골드 (고급스러움)
COLOR_SECONDARY = "#B8860B"    # 다크 골드
COLOR_BG = "#0F172A"           # 슬레이트-900 (깊은 검정)
COLOR_TEXT = "#F8FAFC"         # 슬레이트-50 (부드러운 화이트)
COLOR_AI_BUBBLE = "#1E293B"    # 슬레이트-800 (차분한 네이비)
COLOR_USER_BUBBLE = "#374151"  # 그레이-700 (절제된 느낌)
COLOR_BORDER = "#334155"       # 슬레이트-700

# ============================================
# 2. 대화 설정
# ============================================
# 추천 버튼 (이모지 제거, 전문적 문구)
QUICK_REPLIES = {
    "initial": [
        "투자 대비 효율 분석",
        "실제 도입 사례 확인",
        "긴급 도입 문의"
    ],
    "hospital": [
        "병원 규모별 솔루션",
        "의료법 준수 여부",
        "카카오톡 연동 가능성"
    ],
    "commerce": [
        "커머스 플랫폼 호환성",
        "재고 관리 시스템 연동",
        "결제 프로세스 통합"
    ],
    "final": [
        "설계 제안서 신청",
        "전화 상담 예약",
        "이메일 자료 요청"
    ]
}

# ============================================
# 3. Gemini API 설정
# ============================================
GEMINI_MODEL = "gemini-1.5-flash"  # 가장 안정적
GEMINI_TEMPERATURE = 0.7
GEMINI_MAX_TOKENS = 800

# ============================================
# 4. System Prompt (McKinsey 컨설턴트 페르소나)
# ============================================
SYSTEM_PROMPT = """
당신은 **IMD 아키텍처 그룹의 수석 AI 전략 컨설턴트**입니다.

## 당신의 역할
- 대표의 사업 과제를 **데이터 기반으로 분석**
- AI 도입 시 **정량적 효과 제시** (매출 증가율, ROI 등)
- 전문적이되 **접근 가능한 조언** 제공

## 대화 원칙
1. **경청**: "대표님 사업의 핵심 과제를 파악했습니다."
2. **분석**: "현재 전환율 2%를 5%로 개선 시, 월 매출 150% 증가 예상."
3. **제안**: "구체적인 ROI 시뮬레이션을 제시해드리겠습니다."
4. **행동**: "아래 정보를 남겨주시면, 24시간 내 맞춤 설계 제안서를 발송합니다."

## 톤 가이드
- **사용**: 파악했습니다 / 분석 결과 / 제안드립니다 / 확인하시겠습니까
- **금지**: 솔직히 / 와... / 바로 그겁니다 / 모든 이모지
- **문장**: 간결하고 명확하게 (1문장 = 1메시지)
- **호칭**: 대표님 (일관성 유지)

## 데이터 기반 대화
항상 구체적 수치를 제시하세요:
- ❌ "매출이 많이 늘어납니다"
- ✅ "월 매출 평균 45% 증가 (6개월 데이터 기준)"

## 현재 고객 상황
- 업종: {user_type}
- 주요 과제: {pain_point}
- 대화 진행도: {stage}
- 관여도: {trust_level}/100

## 대응 전략
**가격 문의 시:**
"투자 금액보다 중요한 것은 회수 기간입니다. 현재 월 방문자 수와 전환율을 공유해주시면, 정확한 ROI를 산출해드리겠습니다."

**효과 의심 시:**
"데이터로 말씀드리겠습니다. [업종] 평균 전환율 개선: 야간 상담 32% 증가, 이탈률 40% 감소. 상세 사례를 확인하시겠습니까?"

**시간 부족 시:**
"이해합니다. 핵심만 말씀드리면, 현재 놓치는 고객의 30%를 AI가 자동 전환합니다. 간단한 정보만 남겨주시면 분석 리포트를 보내드립니다."

**지금 사용자의 입력에 전문가답게 응답하세요.**
"""

# ============================================
# 5. 사례 데이터 (정량적 수치 중심)
# ============================================
CASE_STUDIES = {
    "hospital": {
        "title": "서울 A 성형외과",
        "result": "야간 예약 전환율 32% 상승, 월 추가 매출 450만원",
        "quote": "24시간 응대 시스템으로 기회 손실이 사라졌습니다.",
        "data": "도입 6개월, 누적 상담 2,847건, 예약 전환율 18% → 24%"
    },
    "commerce": {
        "title": "B 프리미엄 쇼핑몰",
        "result": "구매 전환율 1.8배 증가 (2.1% → 3.8%), 평균 객단가 22% 상승",
        "quote": "고객 취향 분석 기반 추천으로 즉시 구매가 늘었습니다.",
        "data": "도입 3개월, 일 평균 거래 87건 → 156건"
    }
}

# ============================================
# 6. 리드 수집 필드
# ============================================
LEAD_FORM_FIELDS = {
    "name": "성함 / 직함",
    "contact": "연락처",
    "company": "기업명 / 병원명",
    "urgency": "도입 희망 시기"
}

URGENCY_OPTIONS = [
    "즉시 (1주 이내)",
    "단기 (1개월 이내)",
    "중기 (분기 내)",
    "장기 (정보 수집 단계)"
]

# ============================================
# 7. Google Sheets 설정
# ============================================
SHEET_COLUMNS = [
    "timestamp",
    "user_type",
    "stage",
    "name",
    "contact",
    "company",
    "urgency",
    "source"
]

# ============================================
# 8. Fallback 방지 설정
# ============================================
# Gemini 호출 실패 시 최대 재시도 횟수
MAX_RETRY_ATTEMPTS = 2

# Fallback 사용 조건 (엄격하게)
USE_FALLBACK_ONLY_AFTER_RETRY = True
