import streamlit as st

# ============================================
# 공통 디자인 컬러
# ============================================
COLOR_PRIMARY = "#111827"
COLOR_BG = "#FFFFFF"
COLOR_TEXT = "#111827"
COLOR_AI_BUBBLE = "#F9FAFB"
COLOR_USER_BUBBLE = "#E5E7EB"
COLOR_BORDER = "#E5E7EB"

# ============================================
# 병원별 데이터셋
# ============================================
DATA = {
    # ==========================================
    # 0. [메인] IMD 회사 소개 (?client= 없거나 root)
    # ==========================================
    "root": {
        "APP_TITLE": "IMD Architecture Group",
        "APP_ICON": "🏛️",
        "HEADER_TITLE": "IMD ARCHITECTURE GROUP",
        "HEADER_SUB": "매출을 설계하는 비즈니스 아키텍처 그룹",
        "HEADER_SMALL": "홈페이지가 아니라, '매출 시스템'을 구축합니다.",
        "INITIAL_MSG": """반갑습니다. 비즈니스 아키텍처 그룹 IMD입니다.

대부분의 방문자는 '홈페이지 견적'을 물어보러 오지만,
결국 **'매출 시스템'**을 계약하고 나갑니다.

무엇을 설계해 드릴까요?""",
        "TONGUE_GUIDE": "",
        "CTA_TITLE": "IMD 시스템 도입 문의",
        "CTA_SUB": "맞춤형 매출 시스템 설계를 시작합니다",
        "FORM_LABEL_1": "회사/병원명",
        "FORM_LABEL_2": "담당자 성함",
        "FORM_PLACEHOLDER_1": "회사명 또는 병원명",
        "FORM_PLACEHOLDER_2": "홍길동",
        "FORM_BUTTON": "무료 컨설팅 신청",
        "FOOTER_TITLE": "IMD Architecture Group",
        "FOOTER_SUB": "매출을 설계하는 비즈니스 아키텍처 그룹",
        "FOOTER_URL": "https://www.converdream.co.kr",
        "TONGUE_TYPES": {},
        "IS_ROOT": True,
        "DEMO_BUTTONS": {
            "hanbang": {"label": "🏥 한의원", "desc": "AI 수석 실장"},
            "gs": {"label": "👁️ 안과", "desc": "AI 검안 시스템"},
            "nana": {"label": "✨ 성형외과", "desc": "AI 뷰티 컨설턴트"},
            "law": {"label": "⚖️ 법률", "desc": "AI 사건 접수"},
            "math": {"label": "📐 수학학원", "desc": "AI 입시 진단"},
            "lift": {"label": "💎 피부과", "desc": "AI 리프팅 진단"},
        },
    },

    # ==========================================
    # 1. [한의원] (?client=hanbang)
    # ==========================================
    "hanbang": {
        "APP_TITLE": "IMD Strategic Consulting",
        "APP_ICON": "💼",
        "HEADER_TITLE": "IMD STRATEGIC CONSULTING",
        "HEADER_SUB": "원장님의 진료 철학을 완벽하게 학습한 'AI 수석 실장'을 소개합니다",
        "HEADER_SMALL": "엑셀은 기록만 하지만, AI는 '매출'을 만듭니다. (체험시간: 2분)",
        "INITIAL_MSG": """안녕하십니까, 원장님.

원장님, 오늘 "그냥 침만 맞을게요"라는 말, 몇 번이나 들으셨습니까?

그 한 마디에 날아간 매출이 이번 달에만 얼마인지 계산해 보셨나요?

환자가 진료실 문을 열기 전, 이미 결제할 마음을 먹게 만드는 것. 그게 제가 하는 일입니다.

저는 밥도 안 먹고, 퇴근도 안 하며, 감정 노동에 지치지도 않는 AI 세일즈 실장입니다.

지금 바로, 제가 악성 환자를 어떻게 'VIP'로 바꾸는지 대화 내역을 눈으로 확인하세요.""",
        "TONGUE_GUIDE": "거울을 보시고 본인의 혀와 가장 비슷한 사진을 선택해주세요",
        "CTA_TITLE": "이 시스템을 한의원에 도입하시겠습니까?",
        "CTA_SUB": "지역구 독점권은 선착순입니다. 무료 도입 견적서를 보내드립니다",
        "FORM_LABEL_1": "병원명",
        "FORM_LABEL_2": "원장님 성함",
        "FORM_PLACEHOLDER_1": "서울한의원",
        "FORM_PLACEHOLDER_2": "홍길동",
        "FORM_BUTTON": "무료 도입 견적서 받기",
        "FOOTER_TITLE": "IMD Strategic Consulting",
        "FOOTER_SUB": "메디컬 전용 AI 매출 엔진 | 전국 수많은 병의원 도입 완료",
        "FOOTER_URL": "https://www.converdream.co.kr",
        "TONGUE_TYPES": {
            "pale": {
                "name": "담백설 (창백한 혀)",
                "emoji": "😶",
                "image": "pale_tongue.png",
                "analysis": (
                    "혀 색이 전반적으로 희고 창백해 보입니다. "
                    "기혈(에너지와 혈액)이 전반적으로 부족해진 상태일 가능성이 높습니다. "
                    "쉽게 피로해지고, 손발이 차거나 어지럼증, 집중력 저하가 동반되기 쉽습니다."
                ),
                "symptoms": "만성 피로, 추위를 많이 탐, 식욕 저하, 어지럼, 얼굴이 창백해 보이는 경향",
                "warning": (
                    "단순 피곤함이 아니라, 몸의 에너지 생산 능력이 떨어진 신호일 수 있습니다. "
                    "장기간 방치하면 면역력 저하, 쉽게 감기에 걸리거나 회복이 느려지는 경향으로 이어질 수 있습니다."
                ),
            },
            "tooth": {
                "name": "치흔설 (이 자국이 남는 혀)",
                "emoji": "😬",
                "image": "tooth_tongue.png",
                "analysis": (
                    "혀 옆 가장자리에 이 자국이 선명하게 찍혀 있는 형태입니다. "
                    "비위(소화기)의 기운이 약해져서, 수분과 노폐물을 제대로 끌어올리지 못하고 "
                    "몸에 습(濕)이 정체되어 있는 상태에서 많이 보입니다."
                ),
                "symptoms": "몸이 무겁고 잘 붓는다, 아침에 일어나도 개운하지 않다, 소화가 더딘 편, 오후에 쉽게 처지는 피로감",
                "warning": (
                    "체질적으로 '잘 붓고, 쉽게 피로해지는 몸'으로 굳어지기 쉬운 패턴입니다. "
                    "방치하면 지방·콜레스테롤 대사 문제, 체중 증가, 만성 피로로 연결될 수 있습니다."
                ),
            },
            "yellow": {
                "name": "황태설 (누런 태가 낀 혀)",
                "emoji": "😮‍💨",
                "image": "yellow_tongue.png",
                "analysis": (
                    "혀 위에 누런 태가 두껍게 낀 모습입니다. "
                    "체내에 열(熱)과 독(毒)이 쌓여 있음을 시사하며, "
                    "간·위장에 부담이 누적된 경우 자주 관찰됩니다."
                ),
                "symptoms": "입 냄새, 입이 자주 마름, 속 쓰림, 변비나 딱딱한 변, 얼굴에 뾰루지·트러블이 잘 올라옴",
                "warning": (
                    "과음, 야식, 매운 음식, 불규칙한 식사와 스트레스가 겹쳐서 "
                    "간·위장에 부담이 과하게 쌓인 신호입니다. "
                    "장기간 방치하면 위염, 소화기 질환, 두통·어지럼으로 이어질 수 있습니다."
                ),
            },
            "purple": {
                "name": "자색설 (자줏빛/검붉은 혀)",
                "emoji": "🟣",
                "image": "purple_tongue.png",
                "analysis": (
                    "혀가 전반적으로 자주빛이 돌거나, 검붉게 보이는 상태입니다. "
                    "혈액순환이 원활하지 않고, 어딘가에 울혈(瘀血)이 정체되어 있는 패턴에서 많이 나타납니다."
                ),
                "symptoms": "만성적인 통증(두통, 어깨·목 결림 등), 손발 저림, 차면서도 답답한 느낌, 어두운 색의 생리혈(여성의 경우)",
                "warning": (
                    "스트레스, 오래 앉아 있는 생활, 과로로 인해 혈액순환이 떨어진 신호일 수 있습니다. "
                    "방치하면 만성 통증, 수족냉증, 두통, 혈압 문제 등으로 이어질 가능성이 있습니다."
                ),
            },
        },
    },

    # ==========================================
    # 2. [GS안과] (?client=gs)
    # ==========================================
    "gs": {
        "APP_TITLE": "안과 AI 정밀 검안 센터",
        "APP_ICON": "👁️",
        "HEADER_TITLE": "안과 AI 정밀 검안 센터",
        "HEADER_SUB": "단순 가격 문의를 '검안 예약'으로 바꾸는 AI 솔루션",
        "HEADER_SMALL": "'라식 얼마예요?' 묻고 나가는 환자를 잡아드립니다. (체험시간: 2분)",
        "INITIAL_MSG": """안녕하세요, 담당자님.

"라식 얼마예요?" 묻고 나가는 환자들... 아깝지 않으십니까?

저희 AI는 가격을 묻기 전에 '눈 상태'를 먼저 묻습니다.

환자가 자신의 눈이 '단순 근시'가 아니라는 걸 알게 되면, 가격이 아니라 '안전한 수술'을 찾게 됩니다.

지금부터 '시력이 떨어진 환자'가 되어 대화를 진행해보세요.""",
        "TONGUE_GUIDE": "스마트폰을 멀리 두고, 아래 글씨가 어떻게 보이는지 선택해주세요",
        "CTA_TITLE": "이 AI 시스템을 안과에 도입하시겠습니까?",
        "CTA_SUB": "야간/주말 문의 자동 응대로 검안 예약률을 높여드립니다",
        "FORM_LABEL_1": "병원명",
        "FORM_LABEL_2": "담당자 성함",
        "FORM_PLACEHOLDER_1": "안과",
        "FORM_PLACEHOLDER_2": "김담당",
        "FORM_BUTTON": "무료 도입 견적서 받기",
        "FOOTER_TITLE": "IMD Strategic Consulting",
        "FOOTER_SUB": "메디컬 전용 AI 매출 엔진 | 안과 특화 솔루션",
        "FOOTER_URL": "https://www.converdream.co.kr",
        "TONGUE_TYPES": {
            "pale": {
                "name": "선명하게 보임 (정상)",
                "emoji": "🎯",
                "image": "clear_vision.png",
                "analysis": (
                    "현재 교정 시력은 양호하나, 각막 두께와 동공 크기에 따라 "
                    "수술 방법이 달라질 수 있습니다. 정밀 검안을 통해 "
                    "스마일라식/라섹/렌즈삽입술 중 최적의 방법을 찾아야 합니다."
                ),
                "symptoms": "일상생활 불편 없음, 안경/렌즈 착용 중, 수술로 편의성 개선 희망",
                "warning": (
                    "시력이 좋아 보여도 '초고도근시'거나 '각막이 얇은 경우' "
                    "일반 라식이 불가능할 수 있습니다. 정밀 검사가 필수입니다."
                ),
            },
            "tooth": {
                "name": "겹쳐 보임 (난시)",
                "emoji": "😵",
                "image": "astigmatism.png",
                "analysis": (
                    "단순 근시가 아닙니다. 고도 난시가 동반되어 있어 "
                    "일반 라식으로는 교정이 어렵습니다. "
                    "스마일라식 프로 또는 렌즈삽입술이 필요합니다."
                ),
                "symptoms": "글자가 두 개로 보임, 눈이 쉽게 피로함, 두통 동반",
                "warning": (
                    "난시를 방치하면 눈의 피로가 누적되고, "
                    "수술 시기를 놓치면 교정 효과가 떨어질 수 있습니다. "
                    "조기 검안이 중요합니다."
                ),
            },
            "yellow": {
                "name": "뿌옇게 보임 (백내장)",
                "emoji": "☁️",
                "image": "cataract.png",
                "analysis": (
                    "수정체 혼탁이 의심됩니다. 단순 노안이 아니라 "
                    "백내장 초기 증상일 수 있습니다. "
                    "다초점 인공수정체 수술로 노안과 백내장을 동시에 해결할 수 있습니다."
                ),
                "symptoms": "전체적으로 안개 낀 듯함, 밝은 곳에서 더 안 보임, 색이 바래 보임",
                "warning": (
                    "백내장은 방치하면 계속 진행됩니다. "
                    "실손보험 적용 여부를 확인하고, 적절한 시기에 수술하는 것이 중요합니다."
                ),
            },
            "purple": {
                "name": "빛 번짐 (야간 시력)",
                "emoji": "✨",
                "image": "glare.png",
                "analysis": (
                    "동공이 크거나 각막이 불규칙합니다. "
                    "야간 운전이 위험할 수 있으며, "
                    "퍼스널 맞춤 수술 설계가 필요합니다."
                ),
                "symptoms": "가로등/헤드라이트 빛이 퍼져 보임, 야간 운전 불편, 눈부심",
                "warning": (
                    "일반 수술을 받으면 빛 번짐이 더 심해질 수 있습니다. "
                    "동공 크기 측정 후 맞춤 수술을 받아야 합니다."
                ),
            },
        },
    },

    # ==========================================
    # 3. [성형외과] (?client=nana)
    # ==========================================
    "nana": {
        "APP_TITLE": "나나성형외과 AI 뷰티 컨설턴트",
        "APP_ICON": "✨",
        "HEADER_TITLE": "AI 뷰티 컨설턴트",
        "HEADER_SUB": "원장님이 수술 중일 때도, AI가 환자의 '니즈'를 파악합니다",
        "HEADER_SMALL": "퇴근 후 문의, 놓치면 경쟁 병원으로 갑니다. (체험시간: 2분)",
        "INITIAL_MSG": """안녕하세요, 실장님.

퇴근 후에 들어오는 성형 문의... 놓치면 다 다른 병원으로 갑니다.

AI가 환자의 '워너비 스타일'을 파악하고 내원까지 시키는 과정을 보여드립니다.

지금부터 '성형을 고민하는 환자'가 되어보세요.""",
        "TONGUE_GUIDE": "원장님께 보여드리고 싶은 '워너비 스타일'을 골라주세요",
        "CTA_TITLE": "이 AI 시스템을 나나성형외과에 도입하시겠습니까?",
        "CTA_SUB": "야간/해외 환자 응대 자동화로 상담 전환율을 높여드립니다",
        "FORM_LABEL_1": "병원명",
        "FORM_LABEL_2": "담당자 성함",
        "FORM_PLACEHOLDER_1": "나나성형외과",
        "FORM_PLACEHOLDER_2": "김실장",
        "FORM_BUTTON": "무료 도입 견적서 받기",
        "FOOTER_TITLE": "IMD Strategic Consulting",
        "FOOTER_SUB": "메디컬 전용 AI 매출 엔진 | 성형외과 특화 솔루션",
        "FOOTER_URL": "https://www.converdream.co.kr",
        "TONGUE_TYPES": {
            "pale": {
                "name": "자연스러움 (Natural)",
                "emoji": "🌿",
                "image": "natural.png",
                "analysis": (
                    "본연의 얼굴 조화를 중시하시는군요. "
                    "'자연유착'이나 '비개방 코성형'으로 개선 가능합니다. "
                    "티 안 나게 예뻐지는 나나의 '내추럴 라인' 레퍼런스를 보여드릴까요?"
                ),
                "symptoms": "티 안 나는 변화 원함, 자연스러운 라인 선호, 과한 성형 거부감",
                "warning": (
                    "자연스러운 결과를 원하신다면 첫 수술 설계가 매우 중요합니다. "
                    "과하게 하면 재수술이 어렵습니다."
                ),
            },
            "tooth": {
                "name": "화려함 (Fancy)",
                "emoji": "💎",
                "image": "fancy.png",
                "analysis": (
                    "확실한 전후 차이를 원하시는군요. "
                    "'세미아웃 라인'과 '직반버선 코' 조합이 베스트입니다. "
                    "화려한 스타일은 재수술 방지를 위해 첫 수술 설계가 매우 중요합니다."
                ),
                "symptoms": "인형 같은 아이돌 라인 원함, 또렷한 이목구비, 드라마틱한 변화 희망",
                "warning": (
                    "화려한 스타일일수록 숙련된 원장님의 기술이 중요합니다. "
                    "재수술 확률을 낮추려면 처음부터 제대로 해야 합니다."
                ),
            },
            "yellow": {
                "name": "자려함 (Mix)",
                "emoji": "✨",
                "image": "mix.png",
                "analysis": (
                    "요즘 트렌드인 '자려한' 스타일입니다. "
                    "나나성형외과가 가장 잘하는 분야입니다. "
                    "'듀얼 트임'을 병행하여 시원하면서도 부담스럽지 않은 눈매를 완성할 수 있습니다."
                ),
                "symptoms": "자연스러움 + 화려함 동시에, 트렌디한 스타일, 연예인 느낌",
                "warning": (
                    "자려한 스타일은 균형이 핵심입니다. "
                    "한쪽으로 치우치면 어색해 보일 수 있어 정밀 상담이 필요합니다."
                ),
            },
            "purple": {
                "name": "글래머러스 (Glam)",
                "emoji": "💋",
                "image": "glam.png",
                "analysis": (
                    "체형 성형을 고려 중이시군요. "
                    "나나의 '멘토 엑스트라' 보형물과 'Full HD 지방흡입'을 추천드립니다. "
                    "촉감과 라인을 동시에 잡는 플랜을 짜드리겠습니다."
                ),
                "symptoms": "볼륨감 있는 스타일 원함, 가슴/힙 성형 관심, 글래머러스한 체형",
                "warning": (
                    "체형 성형은 보형물 선택이 매우 중요합니다. "
                    "싸구려 보형물은 부작용 위험이 있습니다."
                ),
            },
        },
    },

    # ==========================================
    # 4. [법률] (?client=law) - 변호사 대상 B2B 데모
    # ==========================================
    "law": {
        "APP_TITLE": "법무법인 AI 사건 접수처",
        "APP_ICON": "⚖️",
        "HEADER_TITLE": "24시간 AI 사건 접수 시스템",
        "HEADER_SUB": "변호사님 퇴근 후에도, AI가 의뢰인의 '사건 유형'을 분류하고 증거를 파악합니다",
        "HEADER_SMALL": "야간/주말 문의, 놓치면 다른 로펌으로 갑니다. (체험시간: 2분)",
        "INITIAL_MSG": """안녕하세요, 변호사님.

변호사님, "상담 좀 받고 싶은데요"라고 밤 11시에 들어온 문의... 아침에 확인하면 이미 다른 로펌에 연락한 뒤더라고요.

저희 AI는 야간에도 의뢰인의 **'사건 유형(가사/형사)'**을 자동 분류하고, **'증거 유무'**까지 파악해둡니다.

변호사님은 다음 날 출근해서 **'정리된 사건 리포트'**만 확인하시면 됩니다.

지금부터 **'법률 상담이 필요한 의뢰인'** 역할을 해주세요.""",
        "TONGUE_GUIDE": "현재 상황과 가장 가까운 것을 선택해주세요",
        "CTA_TITLE": "변호사님, 이런 시스템 어떠세요?",
        "CTA_SUB": "야간/주말 의뢰인 응대 자동화로 수임률을 높여드립니다",
        "FORM_LABEL_1": "법무법인/사무소명",
        "FORM_LABEL_2": "변호사님 성함",
        "FORM_PLACEHOLDER_1": "법무법인 OO",
        "FORM_PLACEHOLDER_2": "김변호사",
        "FORM_BUTTON": "무료 도입 견적서 받기",
        "FOOTER_TITLE": "IMD Strategic Consulting",
        "FOOTER_SUB": "법률 전용 AI 사건 접수 시스템 | 가사/형사 자동 분류",
        "FOOTER_URL": "https://www.converdream.co.kr",
        "TONGUE_TYPES": {
            "family": {
                "name": "💔 배우자 외도 / 이혼 (가사)",
                "emoji": "💔",
                "image": "family.png",
                "analysis": (
                    "가사 사건으로 분류됩니다. "
                    "이혼 소송은 '증거 싸움'이자 '타이밍 싸움'입니다. "
                    "배우자의 유책 사유(외도, 폭행 등)를 입증할 증거 확보가 핵심입니다."
                ),
                "symptoms": "배우자 외도, 이혼 고민, 재산분할, 양육권, 위자료",
                "warning": (
                    "이혼 의사를 밝히기 전에 증거부터 확보하세요. "
                    "상대방이 재산을 은닉하거나 증거를 인멸할 수 있습니다."
                ),
            },
            "criminal": {
                "name": "🚨 성범죄 / 스토킹 / 폭행 (형사)",
                "emoji": "🚨",
                "image": "criminal.png",
                "analysis": (
                    "형사 사건으로 분류될 가능성이 높습니다. "
                    "가해자가 누구인지에 따라 대응 전략이 완전히 달라집니다. "
                    "배우자의 행위라면 가정폭력/이혼 병행, 타인이라면 형사 고소가 우선입니다."
                ),
                "symptoms": "성범죄 피해, 스토킹, 폭행, 협박, 몰카, 사기",
                "warning": (
                    "현재 안전이 최우선입니다. "
                    "증거 확보도 중요하지만, 신변 보호가 먼저입니다."
                ),
            },
            "evidence_yes": {
                "name": "📸 확실한 증거 있음",
                "emoji": "📸",
                "image": "evidence.png",
                "analysis": (
                    "핵심 증거가 확보된 상태입니다. "
                    "증거 인멸 전 신속한 법적 대응이 유리합니다. "
                    "가사 사건이라면 소 제기, 형사 사건이라면 고소장 접수를 검토합니다."
                ),
                "symptoms": "카톡/문자 확보, 사진/영상 확보, 녹음 파일, CCTV",
                "warning": (
                    "불법적으로 수집한 증거는 법정에서 인정되지 않을 수 있습니다. "
                    "증거의 적법성 검토가 필요합니다."
                ),
            },
            "evidence_no": {
                "name": "🕵️ 심증만 있음 (의심)",
                "emoji": "🕵️",
                "image": "suspicion.png",
                "analysis": (
                    "정황은 있으나 결정적 증거가 부족한 상태입니다. "
                    "합법적인 증거 수집 방법을 안내해 드립니다. "
                    "흥신소 등 불법 채증은 오히려 불리하게 작용할 수 있습니다."
                ),
                "symptoms": "의심 정황 다수, 결정적 증거 부재, 증거 수집 방법 모름",
                "warning": (
                    "성급하게 움직이면 상대방이 경계하여 "
                    "증거 확보가 더 어려워집니다."
                ),
            },
        },
    },

    # ==========================================
    # 5. [수학 학원] (?client=math) - 원장 대상 B2B 데모
    # ==========================================
    "math": {
        "APP_TITLE": "수학 학원 AI 입시 진단관",
        "APP_ICON": "📐",
        "HEADER_TITLE": "AI 입시 진단관",
        "HEADER_SUB": "대치동 1타 강사의 데이터를 학습한 AI가 '인서울 확률'을 냉정하게 진단합니다",
        "HEADER_SMALL": "학부모가 '맞아요!'라고 외치면, 번호는 자동으로 따라옵니다. (체험시간: 2분)",
        "INITIAL_MSG": """안녕하세요, 원장님.

원장님, 학부모가 "상담 좀 받고 싶은데요" 하고 들어왔다가 정보만 얻고 나가는 경험 있으시죠?

저희 AI는 다릅니다.

**'증상을 맞히고 → 공포를 주고 → 해결책은 가린 채'** 번호를 받습니다.

병은 무료로 알려주지만, **약은 DB를 받고 팝니다.**

지금부터 **'수학 학원을 알아보는 학부모'** 역할을 해주세요.""",
        "TONGUE_GUIDE": "자녀의 현재 수학 상황을 선택해주세요",
        "CTA_TITLE": "🔒 [맞춤형 리포트 잠금 해제]",
        "CTA_SUB": "리포트와 '원장님의 긴급 처방전'을 받으시려면 연락처를 입력해주세요",
        "FORM_LABEL_1": "학원명",
        "FORM_LABEL_2": "원장님 성함",
        "FORM_PLACEHOLDER_1": "OO수학학원",
        "FORM_PLACEHOLDER_2": "김원장",
        "FORM_BUTTON": "리포트 받기",
        "FOOTER_TITLE": "IMD Strategic Consulting",
        "FOOTER_SUB": "학원 전용 AI 입시 진단 시스템 | 학부모 DB 자동 수집",
        "FOOTER_URL": "https://www.converdream.co.kr",
        "TONGUE_TYPES": {
            "grade_low": {
                "name": "📉 5등급 이하 (수포자 위기)",
                "emoji": "📉",
                "image": "grade_low.png",
                "analysis": (
                    "어머님, 솔직히 말씀드리겠습니다. "
                    "지금 상태는 '수포자 직전'입니다. "
                    "학원을 바꾸는 게 아니라 '수학을 다시 시작'해야 하는 상황입니다."
                ),
                "symptoms": "기초 개념 붕괴, 학교 진도 포기, 수학 시간에 멍때림",
                "warning": (
                    "중학교 때 놓친 개념부터 다시 잡지 않으면 "
                    "고등학교 3년 내내 수학은 포기 과목이 됩니다. "
                    "지금이 마지막 기회입니다."
                ),
            },
            "grade_mid": {
                "name": "📊 3~4등급 (추락 위험)",
                "emoji": "📊",
                "image": "grade_mid.png",
                "analysis": (
                    "어머님, 지금 방식이 위험합니다. "
                    "3~4등급은 '개념은 아는데 응용이 안 되는' 전형적인 함정입니다. "
                    "이 상태로 고2 수학 들어가면 5등급 이하로 추락할 확률이 90% 이상입니다."
                ),
                "symptoms": "쉬운 문제는 맞고 어려운 문제는 틀림, 시간 부족, 등급 정체",
                "warning": (
                    "지금 당장 '문제 풀이'를 멈추고 '개념 재건축'을 해야 합니다. "
                    "이번 방학이 마지막 골든타임입니다."
                ),
            },
            "grade_high": {
                "name": "📈 1~2등급 목표 (전략 필요)",
                "emoji": "📈",
                "image": "grade_high.png",
                "analysis": (
                    "어머님, 상위권은 '실력'이 아니라 '전략'에서 갈립니다. "
                    "킬러 문항 하나에 10분 쓰다가 뒷문제 날리는 학생들, 매년 봅니다."
                ),
                "symptoms": "킬러 문항에서 막힘, 시간 부족, 실수로 등급 하락",
                "warning": (
                    "시간 배분과 멘탈 관리. 이걸 훈련 안 하면 수능 때 무너집니다. "
                    "1등급과 2등급은 실력이 아니라 전략 차이입니다."
                ),
            },
            "preview": {
                "name": "🚀 선행 학습 (독이 될 수도)",
                "emoji": "🚀",
                "image": "preview.png",
                "analysis": (
                    "어머님, 선행이 독이 되는 경우가 더 많습니다. "
                    "빠르게 훑고 지나가면 결국 고2 때 다시 돌아와야 합니다. "
                    "그때는 시간이 없어서 제대로 못 잡습니다."
                ),
                "symptoms": "진도는 빠른데 이해 안 됨, 배운 거 금방 까먹음",
                "warning": (
                    "선행의 핵심은 '속도'가 아니라 '깊이'입니다. "
                    "무리한 선행은 오히려 성적을 떨어뜨립니다."
                ),
            },
        },
    },

    # ==========================================
    # 6. [피부과 리프팅] (?client=lift) - B2C 고객 직접 타겟 (광고용)
    # ==========================================
    "lift": {
        "APP_TITLE": "AI 리프팅 진단",
        "APP_ICON": "💎",
        "HEADER_TITLE": "내 얼굴형에 딱 맞는 리프팅 시술은?",
        "HEADER_SUB": "4만 건 데이터 기반 AI 분석",
        "HEADER_SMALL": "30초 진단으로 나에게 맞는 시술과 예상 비용을 확인하세요",
        "INITIAL_MSG": """안녕하세요, AI 리프팅 진단 시스템입니다.

**4만 건의 시술 데이터**를 학습한 AI가 고객님의 피부 타입에 딱 맞는 시술을 분석해 드립니다.

간단한 질문 3가지만 답해주시면, **맞춤 시술 리포트**를 무료로 받아보실 수 있습니다.

먼저, 고객님의 **연령대**를 선택해주세요.""",
        "TONGUE_GUIDE": "버튼을 선택하거나, 직접 입력하셔도 됩니다",
        "CTA_TITLE": "🔒 맞춤 시술 리포트 잠금 해제",
        "CTA_SUB": "추천 시술과 예상 비용을 확인하려면 연락처를 입력해주세요",
        "FORM_LABEL_1": "성함",
        "FORM_LABEL_2": "연락처",
        "FORM_PLACEHOLDER_1": "홍길동",
        "FORM_PLACEHOLDER_2": "010-1234-5678",
        "FORM_BUTTON": "리포트 무료로 받기",
        "FOOTER_TITLE": "IMD Strategic Consulting",
        "FOOTER_SUB": "피부과 전용 AI 리프팅 진단 시스템 구축 문의 | 시술 전환율 극대화 솔루션",
        "FOOTER_URL": "https://www.converdream.co.kr",
        "TONGUE_TYPES": {
            "age_30": {
                "name": "30대",
                "emoji": "3️⃣",
                "image": "age_30.png",
                "analysis": "30대는 예방적 리프팅의 골든타임입니다.",
                "symptoms": "초기 탄력 저하, 미세 주름",
                "warning": "지금 관리하면 10년 후가 달라집니다.",
            },
            "age_40": {
                "name": "40대",
                "emoji": "4️⃣",
                "image": "age_40.png",
                "analysis": "40대는 본격적인 리프팅이 필요한 시기입니다.",
                "symptoms": "팔자주름, 턱선 흐려짐",
                "warning": "비수술 리프팅의 마지막 적기입니다.",
            },
            "age_50": {
                "name": "50대 이상",
                "emoji": "5️⃣",
                "image": "age_50.png",
                "analysis": "50대 이상은 복합 시술이 효과적입니다.",
                "symptoms": "전체적 처짐, 볼륨 손실",
                "warning": "부분 시술보다 풀페이스가 경제적입니다.",
            },
        },
        "STEP_BUTTONS": {
            "step1_age": {
                "question": "고객님의 연령대를 선택해주세요.",
                "buttons": ["30대", "40대", "50대 이상"],
            },
            "step2_concern": {
                "question": "가장 신경 쓰이는 부위는 어디인가요?",
                "buttons": ["턱라인 무너짐", "팔자주름", "볼패임/볼처짐"],
            },
            "step3_history": {
                "question": "과거 리프팅 시술 경험이 있으신가요?",
                "buttons": ["없음", "1년 이내", "3년 이내"],
            },
        },
    },
}

# ============================================
# URL 파라미터 파싱 헬퍼 함수
# ============================================
def get_client_id_from_query():
    """URL 파라미터에서 client_id 추출, 없으면 root 반환"""
    try:
        query_params = st.query_params
        if "client" in query_params:
            val = query_params["client"]
            if isinstance(val, list):
                return val[0]
            return val
    except:
        pass
    return "root"  # 기본값을 root로 변경


def get_config(client_id):
    """주어진 client_id에 맞는 설정 반환"""
    return DATA.get(client_id, DATA["root"])
