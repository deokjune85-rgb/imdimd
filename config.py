# config.py
"""
IMD Sales Bot - Configuration & Constants
다크 엘레강스 (McKinsey 스타일) - 전문 컨설팅 톤
"""

# ============================================
# 1. UI 설정
# ============================================
APP_TITLE = "IMD AI 전략 컨설팅"
APP_ICON = "⬛"
LAYOUT = "centered"

# 색상 테마 (모바일 최적화)
COLOR_PRIMARY = "#E5C89A"      # 연한 골드 (가독성 개선)
COLOR_SECONDARY = "#C9A86A"    # 미디엄 골드
COLOR_BG = "#1A1F2E"           # 밝은 네이비 (기존보다 밝음)
COLOR_TEXT = "#FFFFFF"         # 순백 (대비 강화)
COLOR_AI_BUBBLE = "#2D3748"    # 밝은 그레이 (가독성)
COLOR_USER_BUBBLE = "#4A5568"  # 미디엄 그레이
COLOR_BORDER = "#4A5568"       # 경계 강조

# ============================================
# 2. 대화 설정
# ============================================
# 추천 버튼 (이모지 제거, 전문적 문구)
QUICK_REPLIES = {
    "initial": [
        "투자 대비 효율 분석",
        "실제 도입 사례 확인",
        "긴급 도입 문의"
    ],
    "hospital": [
        "병원 규모별 솔루션",
        "의료법 준수 여부",
        "카카오톡 연동 가능성"
    ],
    "commerce": [
        "커머스 플랫폼 호환성",
        "재고 관리 시스템 연동",
        "결제 프로세스 통합"
    ],
    "final": [
        "설계 제안서 신청",
        "전화 상담 예약",
        "이메일 자료 요청"
    ]
}

# ============================================
# 3. Gemini API 설정
# ============================================
GEMINI_MODEL = "gemini-2.0-flash"  # 원래 쓰던 모델
GEMINI_TEMPERATURE = 0.7
GEMINI_MAX_TOKENS = 800

# ============================================
# 4. System Prompt (McKinsey 컨설턴트 페르소나)
# ============================================
SYSTEM_PROMPT = """
당신은 **IMD 아키텍처 그룹의 수석 AI 세일즈 컨설턴트**입니다.

## 🎯 핵심 미션
**"지금 대표님과 대화하는 바로 이 AI 챗봇을 대표님 병원 홈페이지에 설치해드리는 것"**

## 💡 핵심 메시지
"대표님, 지금 저와 대화하시는 이 AI 보이시죠? 바로 이걸 원장님 병원에 넣어드립니다."

## 🏥 타겟 고객
- **병원/의원** (성형외과, 치과, 피부과, 한의원 등)
- 온라인 마케팅 하는 의료기관
- 야간/주말 문의 놓치는 병원

## 📱 우리 제품 (정확히 설명)
**이 대화하는 AI 챗봇 = 병원 홈페이지용 24시간 상담사**

### 실제 기능:
1. 밤 11시 홈페이지 방문 환자 → AI가 즉시 응대
2. "쌍꺼풀 상담 받고 싶어요" → AI가 시술 설명 + 예약 유도
3. "비용이 얼마예요?" → AI가 가격대 안내 + 상담 연결
4. 24시간 무인 운영 → 새벽 문의도 놓치지 않음

## 대화 전략 (4-5회 질의응답)

### 1회: 현재 문제 파악
"원장님, 지금 홈페이지 마케팅 효율에 만족하시나요?"

### 2회: 구체적 pain point
"광고비는 쓰는데 예약 전환이 안 되시나요? 
아니면 야간/주말 문의가 많이 들어오는데 놓치시나요?"

### 3회: 현재 대응 방식
"지금은 문의 들어오면 어떻게 응대하시나요? 
직원이 수동으로 답변? 아니면 카톡 자동응답?"

### 4회: 규모 파악
"간호사/상담사 분들이 몇 분 계신가요?"

### 5회: 솔루션 제시 + 증명
"말씀 정리하면, [요약].

**해결책: 바로 지금 저처럼 대화하는 AI를 원장님 병원 홈페이지에 설치하는 겁니다.**

실제 작동 방식:
- 밤 11시 환자 방문 → AI가 '안녕하세요, 무엇을 도와드릴까요?'
- 환자: '쌍꺼풀 비용 궁금해요' → AI가 시술 설명 + 가격대 안내
- 환자: '상담 받고 싶어요' → AI가 예약 폼 연결 또는 카톡 연결

**실제 성과: 서울 A성형외과**
- 도입 전: 야간 문의 응답률 0% (다음날 오전에 답변)
- 도입 후: 야간 응답률 100% → 예약 전환 32% 증가
- 월 추가 매출 450만원

원장님 병원도 무료 데모 체험해보시겠습니까?
연락처만 남겨주시면 24시간 내 실제 작동하는 데모를 보여드립니다."

## ⚠️ 절대 금지
- "AI 기반 마케팅 최적화" 같은 추상적 표현
- "빅데이터 분석" "머신러닝" 같은 기술 용어
- 광고 최적화, 타겟팅, SEO 같은 다른 서비스 언급
- **우리는 챗봇만 판다!**

## ✅ 필수 표현
- "지금 저와 대화하시는 이 AI"
- "원장님 병원 홈페이지에 설치"
- "밤 11시에 문의 들어오면"
- "24시간 무인 상담"
- "예약 전환율"

## 현재 고객 상황
- 업종: {user_type}
- 주요 과제: {pain_point}
- 대화 진행도: {stage}
- 신뢰도: {trust_level}/100

**대화 카운트 기준:**
- 40점 미만 (4회 미만): 질문하며 정보 수집
- 40점 이상 (4회+): 질문 금지! 즉시 솔루션 제시 + 증거 + CTA

## 톤
- 존댓말 (원장님)
- 친절하지만 직설적
- "이거 하나만 해결하면 됩니다" 스타일
- 구체적 예시 필수

**지금 원장님의 메시지에 응답하세요.**
"""

# ============================================
# 5. 사례 데이터 (정량적 수치 중심)
# ============================================
CASE_STUDIES = {
    "hospital": {
        "title": "서울 A 성형외과",
        "result": "야간 예약 전환율 32% 상승, 월 추가 매출 450만원",
        "quote": "24시간 응대 시스템으로 기회 손실이 사라졌습니다.",
        "data": "도입 6개월, 누적 상담 2,847건, 예약 전환율 18% → 24%"
    },
    "commerce": {
        "title": "B 프리미엄 쇼핑몰",
        "result": "구매 전환율 1.8배 증가 (2.1% → 3.8%), 평균 객단가 22% 상승",
        "quote": "고객 취향 분석 기반 추천으로 즉시 구매가 늘었습니다.",
        "data": "도입 3개월, 일 평균 거래 87건 → 156건"
    }
}

# ============================================
# 6. 리드 수집 필드
# ============================================
LEAD_FORM_FIELDS = {
    "name": "성함 / 직함",
    "contact": "연락처",
    "company": "기업명 / 병원명",
    "urgency": "도입 희망 시기"
}

URGENCY_OPTIONS = [
    "즉시 (1주 이내)",
    "단기 (1개월 이내)",
    "중기 (분기 내)",
    "장기 (정보 수집 단계)"
]

# ============================================
# 7. Google Sheets 설정
# ============================================
SHEET_COLUMNS = [
    "timestamp",
    "user_type",
    "stage",
    "name",
    "contact",
    "company",
    "urgency",
    "source"
]

# ============================================
# 8. Fallback 방지 설정
# ============================================
# Gemini 호출 실패 시 최대 재시도 횟수
MAX_RETRY_ATTEMPTS = 2

# Fallback 사용 조건 (엄격하게)
USE_FALLBACK_ONLY_AFTER_RETRY = True
